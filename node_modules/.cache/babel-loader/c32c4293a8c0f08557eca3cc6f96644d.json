{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\owner\\\\Documents\\\\GitHub\\\\faceRecognition1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\owner\\\\Documents\\\\GitHub\\\\faceRecognition1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\owner\\\\Documents\\\\GitHub\\\\faceRecognition1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\owner\\\\Documents\\\\GitHub\\\\faceRecognition1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Nav from'./component/Navigation/Nav';import Logo from'./component/Logo/Logo';import Rank from'./component/Rank';import Link from'./component/Link/Link';import FaceImage from'./component/FaceImage/FaceImage';import SignIn from'./component/Signin/signin';import Register from'./component/Register/Register';import ChangePassword from'./component/changePassword';//logging out all state is cleared\nvar initialState={input:'',inputUrl:'',box:[],route:'signin',isSignedIn:false,user:{id:'102',name:'',email:'',password:'',entries:0,joined:''}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,password:data.password,entries:data.entries,joined:data.joined}});};_this.onChangeInput=function(event){_this.setState({input:event.target.value});};_this.faceCaculator=function(response){var data=response.outputs[0].data.regions;// .region_info.bounding_box;\nvar domImg=document.getElementById('faceDetector');var width=domImg.width;var height=domImg.height;var boxes=data.map(function(box){return{left:box.region_info.bounding_box.left_col*width,top:box.region_info.bounding_box.top_row*height,right:width-box.region_info.bounding_box.right_col*width,bottom:height-box.region_info.bounding_box.bottom_row*height};});_this.setState({box:_this.state.box.concat(boxes)});console.log(_this.state.box);};_this.onSubmit=function(){_this.setState({inputUrl:_this.state.input,box:[]});// Predict the contents of an image by passing in a URL.\nfetch('https://secret-eyrie-25986.herokuapp.com/imageurl',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({url:_this.state.input})}).then(function(response){return response.json();}).then(function(response){if(response){fetch('https://secret-eyrie-25986.herokuapp.com/image',{method:'put',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(res){return res.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));});_this.faceCaculator(response);}}).catch(function(err){return console.log(err);});};_this.onRouteChange=function(newRoute){if(newRoute==='signin'){_this.setState(initialState);// clear state when sign out\n}else if(newRoute==='home'){_this.setState({isSignedIn:true});}_this.setState({route:newRoute});};_this.state=initialState;return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Nav,{onRouteChange:this.onRouteChange,isSignedIn:this.state.isSignedIn}),this.state.route==='home'?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Logo,null),/*#__PURE__*/React.createElement(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/React.createElement(Link,{input:this.onChangeInput,submit:this.onSubmit}),/*#__PURE__*/React.createElement(FaceImage,{url:this.state.inputUrl,box:this.state.box})):this.state.route==='signin'?/*#__PURE__*/React.createElement(SignIn,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):this.state.route==='changePassword'?/*#__PURE__*/React.createElement(ChangePassword,{email:this.state.user.email,onRouteChange:this.onRouteChange}):/*#__PURE__*/React.createElement(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/owner/Documents/github/facerecognition1/src/App.js"],"names":["React","Component","Nav","Logo","Rank","Link","FaceImage","SignIn","Register","ChangePassword","initialState","input","inputUrl","box","route","isSignedIn","user","id","name","email","password","entries","joined","App","loadUser","data","setState","onChangeInput","event","target","value","faceCaculator","response","outputs","regions","domImg","document","getElementById","width","height","boxes","map","left","region_info","bounding_box","left_col","top","top_row","right","right_col","bottom","bottom_row","state","concat","console","log","onSubmit","fetch","method","headers","body","JSON","stringify","url","then","json","res","count","Object","assign","catch","err","onRouteChange","newRoute"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport Nav from './component/Navigation/Nav';\r\nimport Logo from './component/Logo/Logo';\r\nimport Rank from './component/Rank';\r\nimport Link from './component/Link/Link';\r\nimport FaceImage from './component/FaceImage/FaceImage';\r\nimport SignIn from './component/Signin/signin';\r\nimport Register from './component/Register/Register';\r\nimport ChangePassword from './component/changePassword';\r\n\r\n//logging out all state is cleared\r\nconst initialState = {\r\n  input: '',\r\n  inputUrl: '',\r\n  box: [],\r\n  route: 'signin',\r\n  isSignedIn: false,\r\n  user: {\r\n    id: '102',\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    entries: 0,\r\n    joined: ''\r\n  }\r\n}\r\nclass App extends Component {\r\n  constructor(){\r\n    super()\r\n    this.state = initialState;\r\n  }\r\n\r\n  loadUser = (data) =>{\r\n    this.setState({user: {\r\n      id: data.id,\r\n      name: data.name,\r\n      email: data.email,\r\n      password: data.password,\r\n      entries: data.entries,\r\n      joined: data.joined\r\n    }})\r\n  }\r\n\r\n  onChangeInput = (event) => {\r\n    this.setState({input: event.target.value})\r\n  }\r\n\r\n  faceCaculator = (response)=>{\r\n    const data = response.outputs[0].data.regions\r\n    // .region_info.bounding_box;\r\n    const domImg = document.getElementById('faceDetector');\r\n    const width = domImg.width;\r\n    const height = domImg.height;\r\n    \r\n    const boxes = data.map(box=>({\r\n      left: box.region_info.bounding_box.left_col*width,\r\n      top: box.region_info.bounding_box.top_row*height,\r\n      right: width - box.region_info.bounding_box.right_col*width,\r\n      bottom: height - box.region_info.bounding_box.bottom_row*height\r\n    }))\r\n    this.setState({box: this.state.box.concat(boxes)}) \r\n    \r\n    \r\n    console.log(this.state.box)\r\n  }\r\n  \r\n  onSubmit = () =>{\r\n\r\n    this.setState({\r\n      inputUrl: this.state.input,\r\n      box: []\r\n    });\r\n      // Predict the contents of an image by passing in a URL.\r\n    fetch('https://secret-eyrie-25986.herokuapp.com/imageurl', {\r\n      method: 'post',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify({\r\n        url: this.state.input\r\n      })\r\n    })\r\n    .then(response => response.json())\r\n    .then(response => {\r\n      if(response){\r\n        fetch('https://secret-eyrie-25986.herokuapp.com/image', {\r\n          method: 'put',\r\n          headers: {'Content-Type': 'application/json'},\r\n          body: JSON.stringify({\r\n            id: this.state.user.id\r\n          })\r\n        })\r\n        .then(res=>res.json())\r\n        .then(count=> {\r\n          this.setState(Object.assign(this.state.user, {entries: count}))\r\n        })\r\n        this.faceCaculator(response);\r\n      }\r\n    })\r\n    .catch(err => console.log(err))\r\n  }\r\n\r\n  onRouteChange = (newRoute) =>{\r\n    if(newRoute ==='signin'){\r\n      this.setState(initialState) // clear state when sign out\r\n    }else if(newRoute === 'home'){\r\n      this.setState({isSignedIn: true})\r\n    }\r\n    this.setState({route: newRoute});\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"App\">\r\n\r\n        <Nav onRouteChange={this.onRouteChange} isSignedIn={this.state.isSignedIn}/>\r\n        { this.state.route === 'home'\r\n          ?<div>\r\n            <Logo />\r\n            <Rank name={this.state.user.name} entries={this.state.user.entries}/>\r\n            <Link input={this.onChangeInput} submit={this.onSubmit}/>\r\n            <FaceImage url={this.state.inputUrl} box={this.state.box}/>\r\n          </div>\r\n          :this.state.route === 'signin'\r\n            ?<SignIn loadUser= {this.loadUser} onRouteChange={this.onRouteChange}/>\r\n            :this.state.route === 'changePassword'\r\n              ?<ChangePassword email={this.state.user.email} onRouteChange ={this.onRouteChange}/>\r\n              :<Register loadUser={this.loadUser} onRouteChange ={this.onRouteChange}/>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}